<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hampton Primary School</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #fff 0%, #ffe6e6 100%);
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #c41e3a 0%, #8b0000 100%);
            color: white;
            padding: 20px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .nav {
            background: #8b0000;
            padding: 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .nav-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-wrap: wrap;
        }

        .nav button {
            background: none;
            border: none;
            color: white;
            padding: 15px 25px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
            border-right: 1px solid rgba(255,255,255,0.1);
        }

        .nav button:hover, .nav button.active {
            background: #c41e3a;
        }

        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .page {
            display: none;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            animation: fadeIn 0.3s;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            color: #c41e3a;
            margin-bottom: 20px;
            font-size: 2em;
            border-bottom: 3px solid #c41e3a;
            padding-bottom: 10px;
        }

        h3 {
            color: #8b0000;
            margin: 20px 0 10px;
            font-size: 1.5em;
        }

        .login-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .login-card {
            background: linear-gradient(135deg, #c41e3a 0%, #8b0000 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            text-align: center;
        }

        .login-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(196,30,58,0.3);
        }

        .login-card h3 {
            color: white;
            margin: 0;
        }

        .login-form {
            max-width: 400px;
            margin: 30px auto;
            padding: 30px;
            background: #f9f9f9;
            border-radius: 10px;
            border: 2px solid #c41e3a;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: bold;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #c41e3a;
        }

        button.btn {
            background: linear-gradient(135deg, #c41e3a 0%, #8b0000 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button.btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(196,30,58,0.3);
        }

        button.btn-secondary {
            background: #666;
            margin-left: 10px;
        }

        .dashboard {
            display: none;
        }

        .dashboard.active {
            display: block;
        }

        .dashboard-header {
            background: linear-gradient(135deg, #c41e3a 0%, #8b0000 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .news-item, .event-item, .letter-item {
            background: #f9f9f9;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #c41e3a;
        }

        .news-item h4, .event-item h4, .letter-item h4 {
            color: #c41e3a;
            margin-bottom: 10px;
        }

        .news-item small, .event-item small, .letter-item small {
            color: #666;
        }

        .timetable {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .timetable th {
            background: #c41e3a;
            color: white;
            padding: 12px;
            text-align: center;
            font-weight: bold;
        }

        .timetable td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
        }

        .timetable input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
        }

        .notebook {
            width: 100%;
            min-height: 300px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
        }

        .staff-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .staff-card {
            background: linear-gradient(135deg, #fff 0%, #ffe6e6 100%);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #c41e3a;
            text-align: center;
        }

        .staff-card h4 {
            color: #c41e3a;
            margin-bottom: 10px;
        }

        .tabs {
            display: flex;
            border-bottom: 2px solid #c41e3a;
            margin-bottom: 20px;
        }

        .tab {
            padding: 12px 24px;
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            color: #c41e3a;
            border-bottom: 3px solid #c41e3a;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .slt-staff-view {
            margin: 20px 0;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
            border: 2px solid #c41e3a;
        }

        .student-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .student-card {
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #ddd;
        }

        .alert {
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .alert.error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .media-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .media-item {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #c41e3a;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .nav button {
                padding: 12px 15px;
                font-size: 14px;
            }
            
            .page {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1>🎓 Hampton Primary School</h1>
            <p>Excellence in Education</p>
        </div>
    </div>

    <div class="nav">
        <div class="nav-content">
            <button onclick="showPage('home')" class="active">Home</button>
            <button onclick="showPage('about')">About Us</button>
            <button onclick="showPage('team')">Our Team</button>
            <button onclick="showPage('news')">News</button>
            <button onclick="showPage('events')">Events</button>
            <button onclick="showPage('login')">Log In</button>
        </div>
    </div>

    <div class="container">
        <!-- Home Page -->
        <div id="home" class="page active">
            <h2>Welcome to Hampton Primary School</h2>
            <p style="font-size: 1.1em; line-height: 1.8; margin: 20px 0;">
                At Hampton Primary School, we are committed to providing an outstanding education for every child. 
                Our dedicated team of teachers and staff work tirelessly to create a nurturing environment where 
                children can thrive academically, socially, and emotionally.
            </p>
            <h3>Our Vision</h3>
            <p style="line-height: 1.8;">
                To inspire a love of learning, foster creativity, and develop confident, responsible citizens 
                who are prepared for the challenges of tomorrow.
            </p>
            <h3>Why Choose Hampton?</h3>
            <ul style="line-height: 2; margin-left: 40px; margin-top: 10px;">
                <li>Outstanding Ofsted rating</li>
                <li>Experienced and dedicated teaching staff</li>
                <li>Modern facilities and resources</li>
                <li>Strong community partnerships</li>
                <li>Excellent pastoral care</li>
            </ul>
        </div>

        <!-- About Us Page -->
        <div id="about" class="page">
            <h2>About Us</h2>
            <h3>Our History</h3>
            <p style="line-height: 1.8; margin-bottom: 20px;">
                Hampton Primary School was established in 1965 and has been serving the local community for over 
                50 years. We have grown from a small local school to a thriving educational institution that 
                consistently achieves excellent results.
            </p>
            <h3>Our Values</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;">
                <div style="background: #f9f9f9; padding: 20px; border-radius: 8px; border-left: 4px solid #c41e3a;">
                    <h4 style="color: #c41e3a; margin-bottom: 10px;">Respect</h4>
                    <p>We treat everyone with dignity and kindness</p>
                </div>
                <div style="background: #f9f9f9; padding: 20px; border-radius: 8px; border-left: 4px solid #c41e3a;">
                    <h4 style="color: #c41e3a; margin-bottom: 10px;">Excellence</h4>
                    <p>We strive for the highest standards in everything we do</p>
                </div>
                <div style="background: #f9f9f9; padding: 20px; border-radius: 8px; border-left: 4px solid #c41e3a;">
                    <h4 style="color: #c41e3a; margin-bottom: 10px;">Dedication</h4>
                    <p>We are committed to continuous improvement</p>
                </div>
            </div>
        </div>

        <!-- Our Team Page -->
        <div id="team" class="page">
            <h2>Our Team</h2>
            <p style="margin-bottom: 20px;">Meet our dedicated staff members who make Hampton Primary School exceptional.</p>
            <div id="staffDisplay" class="staff-grid"></div>
        </div>

        <!-- News Page -->
        <div id="news" class="page">
            <h2>School News</h2>
            <div id="newsDisplay"></div>
        </div>

        <!-- Events Page -->
        <div id="events" class="page">
            <h2>Upcoming Events</h2>
            <div id="eventsDisplay"></div>
        </div>

        <!-- Login Page -->
        <div id="login" class="page">
            <h2>Log In</h2>
            <p style="text-align: center; margin-bottom: 30px;">Please select your login type:</p>
            
            <div id="loginOptions" class="login-options">
                <div class="login-card" onclick="showLoginForm('student')">
                    <h3>👨‍🎓 Student Login</h3>
                    <p>Access your student portal</p>
                </div>
                <div class="login-card" onclick="showLoginForm('staff')">
                    <h3>👨‍🏫 Staff Login</h3>
                    <p>Access your staff dashboard</p>
                </div>
                <div class="login-card" onclick="showLoginForm('slt')">
                    <h3>👔 Senior Leaders</h3>
                    <p>Access SLT management portal</p>
                </div>
            </div>

            <div id="loginFormContainer" style="display: none;">
                <button onclick="backToLoginOptions()" class="btn btn-secondary" style="margin-bottom: 20px;">← Back</button>
                <div class="login-form">
                    <h3 id="loginFormTitle" style="text-align: center; margin-bottom: 20px;"></h3>
                    <div class="form-group">
                        <label>Username:</label>
                        <input type="text" id="loginUsername" placeholder="Enter username">
                    </div>
                    <div class="form-group">
                        <label>Password:</label>
                        <input type="password" id="loginPassword" placeholder="Enter password">
                    </div>
                    <div id="loginError" class="alert error" style="display: none;"></div>
                    <button onclick="attemptLogin()" class="btn" style="width: 100%;">Login</button>
                </div>
            </div>
        </div>

        <!-- Student Dashboard -->
        <div id="studentDashboard" class="dashboard">
            <div class="dashboard-header">
                <div>
                    <h2 style="margin: 0; color: white;">Student Dashboard</h2>
                    <p id="studentWelcome"></p>
                </div>
                <button onclick="logout()" class="btn">Logout</button>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="switchTab('studentNews')">News</button>
                <button class="tab" onclick="switchTab('studentEvents')">Events</button>
                <button class="tab" onclick="switchTab('studentMedia')">Media</button>
                <button class="tab" onclick="switchTab('studentLetters')">Letters</button>
            </div>

            <div id="studentNews" class="tab-content active">
                <h3>School News</h3>
                <div id="studentNewsDisplay"></div>
            </div>

            <div id="studentEvents" class="tab-content">
                <h3>Upcoming Events</h3>
                <div id="studentEventsDisplay"></div>
            </div>

            <div id="studentMedia" class="tab-content">
                <h3>Student Media & Content</h3>
                <div id="studentMediaDisplay" class="media-grid"></div>
            </div>

            <div id="studentLetters" class="tab-content">
                <h3>School Letters</h3>
                <div id="studentLettersDisplay"></div>
            </div>
        </div>

        <!-- Staff Dashboard -->
        <div id="staffDashboard" class="dashboard">
            <div class="dashboard-header">
                <div>
                    <h2 style="margin: 0; color: white;">Staff Dashboard</h2>
                    <p id="staffWelcome"></p>
                </div>
                <button onclick="logout()" class="btn">Logout</button>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="switchTab('staffAnnouncements')">Post Announcement</button>
                <button class="tab" onclick="switchTab('staffEvents')">Create Event</button>
                <button class="tab" onclick="switchTab('staffTimetable')">My Timetable</button>
                <button class="tab" onclick="switchTab('staffNotebook')">My Notebook</button>
            </div>

            <div id="staffAnnouncements" class="tab-content active">
                <h3>Post News Announcement</h3>
                <div class="form-group">
                    <label>Title:</label>
                    <input type="text" id="newsTitle" placeholder="Enter news title">
                </div>
                <div class="form-group">
                    <label>Content:</label>
                    <textarea id="newsContent" rows="6" placeholder="Enter news content"></textarea>
                </div>
                <button onclick="postNews()" class="btn">Post News</button>
                <div id="newsSuccess" class="alert" style="display: none; margin-top: 15px;"></div>
            </div>

            <div id="staffEvents" class="tab-content">
                <h3>Create Event</h3>
                <div class="form-group">
                    <label>Event Name:</label>
                    <input type="text" id="eventName" placeholder="Enter event name">
                </div>
                <div class="form-group">
                    <label>Date:</label>
                    <input type="date" id="eventDate">
                </div>
                <div class="form-group">
                    <label>Time:</label>
                    <input type="time" id="eventTime">
                </div>
                <div class="form-group">
                    <label>Description:</label>
                    <textarea id="eventDescription" rows="4" placeholder="Enter event description"></textarea>
                </div>
                <button onclick="createEvent()" class="btn">Create Event</button>
                <div id="eventSuccess" class="alert" style="display: none; margin-top: 15px;"></div>
            </div>

            <div id="staffTimetable" class="tab-content">
                <h3>My Timetable</h3>
                <table class="timetable" id="staffTimetableTable"></table>
                <button onclick="saveStaffTimetable()" class="btn" style="margin-top: 15px;">Save Timetable</button>
                <div id="timetableSuccess" class="alert" style="display: none; margin-top: 15px;"></div>
            </div>

            <div id="staffNotebook" class="tab-content">
                <h3>My Notebook</h3>
                <textarea class="notebook" id="staffNotebookText" placeholder="Write your notes here..."></textarea>
                <button onclick="saveStaffNotebook()" class="btn" style="margin-top: 15px;">Save Notes</button>
                <div id="notebookSuccess" class="alert" style="display: none; margin-top: 15px;"></div>
            </div>
        </div>

        <!-- SLT Dashboard -->
        <div id="sltDashboard" class="dashboard">
            <div class="dashboard-header">
                <div>
                    <h2 style="margin: 0; color: white;">Senior Leadership Dashboard</h2>
                    <p id="sltWelcome"></p>
                </div>
                <button onclick="logout()" class="btn">Logout</button>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="switchTab('sltStaffView')">Staff Overview</button>
                <button class="tab" onclick="switchTab('sltStudents')">Student Management</button>
            </div>

            <div id="sltStaffView" class="tab-content active">
                <h3>Staff Timetables & Notebooks</h3>
                <div id="sltStaffDisplay"></div>
            </div>

            <div id="sltStudents" class="tab-content">
                <h3>Student Password Management</h3>
                <div id="sltStudentsList" class="student-list"></div>
            </div>
        </div>

        <!-- Password Change Modal -->
        <div id="passwordChangeModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
            <div class="login-form" style="max-width: 500px; margin: 0;">
                <h3>Change Your Password</h3>
                <p style="margin-bottom: 20px;">You are using temporary credentials. Please set a new password.</p>
                <div class="form-group">
                    <label>New Password:</label>
                    <input type="password" id="newPassword" placeholder="Enter new password">
                </div>
                <div class="form-group">
                    <label>Confirm Password:</label>
                    <input type="password" id="confirmPassword" placeholder="Confirm new password">
                </div>
                <div id="passwordError" class="alert error" style="display: none;"></div>
                <button onclick="changeStudentPassword()" class="btn" style="width: 100%;">Change Password</button>
            </div>
        </div>
    </div>

    <script>
        // Data Storage - In production, this would use localStorage
        let currentUser = null;
        let currentUserType = null;
        let loginType = null;

        // Initialize default data
        let students = [
            { username: 'student1', password: 'temp123', name: 'John Smith', tempPassword: true },
            { username: 'student2', password: 'temp123', name: 'Emma Johnson', tempPassword: true },
            { username: 'student3', password: 'temp123', name: 'Oliver Williams', tempPassword: true },
            { username: 'student4', password: 'temp123', name: 'Sophia Brown', tempPassword: true },
            { username: 'student5', password: 'temp123', name: 'Lucas Jones', tempPassword: true }
        ];

        let staff = [];

        let sltMembers = [
            { username: 'head', password: 'head123', name: 'Dr. Sarah Thompson', role: 'Head Teacher' },
            { username: 'deputy1', password: 'deputy123', name: 'Mr. James Clarke', role: 'Deputy Head' },
            { username: 'deputy2', password: 'deputy123', name: 'Mrs. Emily Roberts', role: 'Deputy Head' },
            { username: 'assistant1', password: 'assist123', name: 'Mr. David Wilson', role: 'Assistant Head' },
            { username: 'assistant2', password: 'assist123', name: 'Ms. Rachel Green', role: 'Assistant Head' },
            { username: 'senco', password: 'senco123', name: 'Mrs. Lisa Anderson', role: 'SENCO' }
        ];

        let newsItems = [];
        let events = [];
        let studentMedia = [];
        let letters = [
            { title: 'School Session Notices', date: 'Daily', content: 'Every day at 17:40! Join us.' }
        ];

        // Load data from localStorage on page load
        function loadData() {
            try {
                const savedStudents = localStorage.getItem('students');
                if (savedStudents) students = JSON.parse(savedStudents);

                const savedStaff = localStorage.getItem('staff');
                if (savedStaff) staff = JSON.parse(savedStaff);

                const savedNews = localStorage.getItem('news');
                if (savedNews) newsItems = JSON.parse(savedNews);

                const savedEvents = localStorage.getItem('events');
                if (savedEvents) events = JSON.parse(savedEvents);

                const savedMedia = localStorage.getItem('studentMedia');
                if (savedMedia) studentMedia = JSON.parse(savedMedia);

                const savedLetters = localStorage.getItem('letters');
                if (savedLetters) letters = JSON.parse(savedLetters);
            } catch (e) {
                console.log('LocalStorage not available');
            }
        }

        function saveData() {
            try {
                localStorage.setItem('students', JSON.stringify(students));
                localStorage.setItem('staff', JSON.stringify(staff));
                localStorage.setItem('news', JSON.stringify(newsItems));
                localStorage.setItem('events', JSON.stringify(events));
                localStorage.setItem('studentMedia', JSON.stringify(studentMedia));
                localStorage.setItem('letters', JSON.stringify(letters));
            } catch (e) {
                console.log('LocalStorage not available');
            }
        }

        // Navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav button').forEach(b => b.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            event.target.classList.add('active');

            if (pageId === 'team') displayStaff();
            if (pageId === 'news') displayPublicNews();
            if (pageId === 'events') displayPublicEvents();
        }

        function showLoginForm(type) {
            loginType = type;
            document.getElementById('loginOptions').style.display = 'none';
            document.getElementById('loginFormContainer').style.display = 'block';
            
            const titles = {
                'student': '👨‍🎓 Student Login',
                'staff': '👨‍🏫 Staff Login',
                'slt': '👔 Senior Leaders Login'
            };
            
            document.getElementById('loginFormTitle').textContent = titles[type];
            document.getElementById('loginUsername').value = '';
            document.getElementById('loginPassword').value = '';
            document.getElementById('loginError').style.display = 'none';
        }

        function backToLoginOptions() {
            document.getElementById('loginOptions').style.display = 'grid';
            document.getElementById('loginFormContainer').style.display = 'none';
            loginType = null;
        }

        function attemptLogin() {
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value;
            const errorDiv = document.getElementById('loginError');

            if (!username || !password) {
                errorDiv.textContent = 'Please enter both username and password.';
                errorDiv.style.display = 'block';
                return;
            }

            let user = null;
            
            if (loginType === 'student') {
                user = students.find(s => s.username === username && s.password === password);
                if (user) {
                    currentUser = user;
                    currentUserType = 'student';
                    
                    if (user.tempPassword) {
                        showPasswordChangeModal();
                    } else {
                        showStudentDashboard();
                    }
                }
            } else if (loginType === 'staff') {
                user = staff.find(s => s.username === username && s.password === password);
                if (user) {
                    currentUser = user;
                    currentUserType = 'staff';
                    showStaffDashboard();
                }
            } else if (loginType === 'slt') {
                user = sltMembers.find(s => s.username === username && s.password === password);
                if (user) {
                    currentUser = user;
                    currentUserType = 'slt';
                    showSLTDashboard();
                }
            }

            if (!user) {
                errorDiv.textContent = 'Invalid username or password.';
                errorDiv.style.display = 'block';
            }
        }

        function showPasswordChangeModal() {
            document.getElementById('passwordChangeModal').style.display = 'flex';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
            document.getElementById('passwordError').style.display = 'none';
        }

        function changeStudentPassword() {
            const newPass = document.getElementById('newPassword').value;
            const confirmPass = document.getElementById('confirmPassword').value;
            const errorDiv = document.getElementById('passwordError');

            if (!newPass || !confirmPass) {
                errorDiv.textContent = 'Please fill in both fields.';
                errorDiv.style.display = 'block';
                return;
            }

            if (newPass !== confirmPass) {
                errorDiv.textContent = 'Passwords do not match.';
                errorDiv.style.display = 'block';
                return;
            }

            if (newPass.length < 6) {
                errorDiv.textContent = 'Password must be at least 6 characters.';
                errorDiv.style.display = 'block';
                return;
            }

            // Update password
            const studentIndex = students.findIndex(s => s.username === currentUser.username);
            students[studentIndex].password = newPass;
            students[studentIndex].tempPassword = false;
            currentUser = students[studentIndex];
            
            saveData();
            
            document.getElementById('passwordChangeModal').style.display = 'none';
            showStudentDashboard();
        }

        function logout() {
            currentUser = null;
            currentUserType = null;
            
            document.querySelectorAll('.dashboard').forEach(d => d.classList.remove('active'));
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('login').classList.add('active');
            backToLoginOptions();
        }

        // Student Dashboard
        function showStudentDashboard() {
            document.getElementById('login').classList.remove('active');
            document.getElementById('studentDashboard').classList.add('active');
            document.getElementById('studentWelcome').textContent = `Welcome, ${currentUser.name}!`;
            
            displayStudentNews();
            displayStudentEvents();
            displayStudentMedia();
            displayStudentLetters();
        }

        function displayStudentNews() {
            const container = document.getElementById('studentNewsDisplay');
            if (newsItems.length === 0) {
                container.innerHTML = '<p style="color: #666;">No news items available.</p>';
                return;
            }
            
            container.innerHTML = newsItems.map(item => `
                <div class="news-item">
                    <h4>${item.title}</h4>
                    <small>Posted by ${item.author} on ${item.date}</small>
                    <p style="margin-top: 10px;">${item.content}</p>
                </div>
            `).join('');
        }

        function displayStudentEvents() {
            const container = document.getElementById('studentEventsDisplay');
            if (events.length === 0) {
                container.innerHTML = '<p style="color: #666;">No upcoming events.</p>';
                return;
            }
            
            container.innerHTML = events.map(item => `
                <div class="event-item">
                    <h4>${item.name}</h4>
                    <small>${item.date} at ${item.time}</small>
                    <p style="margin-top: 10px;">${item.description}</p>
                </div>
            `).join('');
        }

        function displayStudentMedia() {
            const container = document.getElementById('studentMediaDisplay');
            container.innerHTML = studentMedia.map(item => `
                <div class="media-item">
                    <h4 style="color: #c41e3a; margin-bottom: 10px;">${item.title}</h4>
                    <p style="color: #666;">${item.type}</p>
                </div>
            `).join('');
        }

        function displayStudentLetters() {
            const container = document.getElementById('studentLettersDisplay');
            container.innerHTML = letters.map(item => `
                <div class="letter-item">
                    <h4>${item.title}</h4>
                    <small>${item.date}</small>
                    <p style="margin-top: 10px;">${item.content}</p>
                </div>
            `).join('');
        }

        // Staff Dashboard
        function showStaffDashboard() {
            document.getElementById('login').classList.remove('active');
            document.getElementById('staffDashboard').classList.add('active');
            document.getElementById('staffWelcome').textContent = `Welcome, ${currentUser.name}!`;
            
            generateStaffTimetable();
            loadStaffNotebook();
        }

        function postNews() {
            const title = document.getElementById('newsTitle').value.trim();
            const content = document.getElementById('newsContent').value.trim();
            
            if (!title || !content) {
                alert('Please fill in all fields.');
                return;
            }

            const newsItem = {
                title: title,
                content: content,
                author: currentUser.name,
                date: new Date().toLocaleDateString()
            };

            newsItems.unshift(newsItem);
            saveData();

            document.getElementById('newsTitle').value = '';
            document.getElementById('newsContent').value = '';
            
            const successDiv = document.getElementById('newsSuccess');
            successDiv.textContent = 'News posted successfully!';
            successDiv.style.display = 'block';
            setTimeout(() => successDiv.style.display = 'none', 3000);
        }

        function createEvent() {
            const name = document.getElementById('eventName').value.trim();
            const date = document.getElementById('eventDate').value;
            const time = document.getElementById('eventTime').value;
            const description = document.getElementById('eventDescription').value.trim();
            
            if (!name || !date || !time || !description) {
                alert('Please fill in all fields.');
                return;
            }

            const event = {
                name: name,
                date: date,
                time: time,
                description: description,
                createdBy: currentUser.name
            };

            events.push(event);
            saveData();

            document.getElementById('eventName').value = '';
            document.getElementById('eventDate').value = '';
            document.getElementById('eventTime').value = '';
            document.getElementById('eventDescription').value = '';
            
            const successDiv = document.getElementById('eventSuccess');
            successDiv.textContent = 'Event created successfully!';
            successDiv.style.display = 'block';
            setTimeout(() => successDiv.style.display = 'none', 3000);
        }

        function generateStaffTimetable() {
            const table = document.getElementById('staffTimetableTable');
            const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
            const periods = ['Form', 'Period 1', 'Period 2', 'Break', 'Period 3', 'Period 4', 'Lunch', 'Period 5'];

            let html = '<thead><tr><th>Time</th>';
            days.forEach(day => html += `<th>${day}</th>`);
            html += '</tr></thead><tbody>';

            periods.forEach(period => {
                html += `<tr><td style="background: #f0f0f0; font-weight: bold;">${period}</td>`;
                days.forEach(day => {
                    const key = `${period}-${day}`;
                    const value = currentUser.timetable && currentUser.timetable[key] ? currentUser.timetable[key] : '';
                    html += `<td><input type="text" data-period="${period}" data-day="${day}" value="${value}" placeholder="-"></td>`;
                });
                html += '</tr>';
            });

            html += '</tbody>';
            table.innerHTML = html;
        }

        function saveStaffTimetable() {
            const inputs = document.querySelectorAll('#staffTimetableTable input');
            const timetable = {};

            inputs.forEach(input => {
                const period = input.dataset.period;
                const day = input.dataset.day;
                const key = `${period}-${day}`;
                timetable[key] = input.value;
            });

            const staffIndex = staff.findIndex(s => s.username === currentUser.username);
            staff[staffIndex].timetable = timetable;
            currentUser.timetable = timetable;
            
            saveData();
            
            const successDiv = document.getElementById('timetableSuccess');
            successDiv.textContent = 'Timetable saved successfully!';
            successDiv.style.display = 'block';
            setTimeout(() => successDiv.style.display = 'none', 3000);
        }

        function loadStaffNotebook() {
            const textarea = document.getElementById('staffNotebookText');
            textarea.value = currentUser.notebook || '';
        }

        function saveStaffNotebook() {
            const notes = document.getElementById('staffNotebookText').value;
            
            const staffIndex = staff.findIndex(s => s.username === currentUser.username);
            staff[staffIndex].notebook = notes;
            currentUser.notebook = notes;
            
            saveData();
            
            const successDiv = document.getElementById('notebookSuccess');
            successDiv.textContent = 'Notes saved successfully!';
            successDiv.style.display = 'block';
            setTimeout(() => successDiv.style.display = 'none', 3000);
        }

        // SLT Dashboard
        function showSLTDashboard() {
            document.getElementById('login').classList.remove('active');
            document.getElementById('sltDashboard').classList.add('active');
            document.getElementById('sltWelcome').textContent = `Welcome, ${currentUser.name} - ${currentUser.role}`;
            
            displaySLTStaffView();
            displaySLTStudents();
        }

        function displaySLTStaffView() {
            const container = document.getElementById('sltStaffDisplay');
            
            if (staff.length === 0) {
                container.innerHTML = '<p style="color: #666;">No staff members registered yet.</p>';
                return;
            }

            container.innerHTML = staff.map((member, index) => {
                const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
                const periods = ['Form', 'Period 1', 'Period 2', 'Break', 'Period 3', 'Period 4', 'Lunch', 'Period 5'];

                let timetableHTML = '<table class="timetable" style="font-size: 12px;"><thead><tr><th>Time</th>';
                days.forEach(day => timetableHTML += `<th>${day}</th>`);
                timetableHTML += '</tr></thead><tbody>';

                periods.forEach(period => {
                    timetableHTML += `<tr><td style="background: #f0f0f0; font-weight: bold;">${period}</td>`;
                    days.forEach(day => {
                        const key = `${period}-${day}`;
                        const value = member.timetable && member.timetable[key] ? member.timetable[key] : '';
                        timetableHTML += `<td><input type="text" data-staff="${index}" data-period="${period}" data-day="${day}" value="${value}" placeholder="-"></td>`;
                    });
                    timetableHTML += '</tr>';
                });

                timetableHTML += '</tbody></table>';

                return `
                    <div class="slt-staff-view">
                        <h4 style="color: #c41e3a;">${member.name}</h4>
                        <p style="color: #666; margin-bottom: 15px;">Username: ${member.username}</p>
                        
                        <h5 style="margin-top: 20px; margin-bottom: 10px;">Timetable:</h5>
                        ${timetableHTML}
                        
                        <h5 style="margin-top: 20px; margin-bottom: 10px;">Notebook:</h5>
                        <textarea class="notebook" data-staff="${index}" style="min-height: 150px;">${member.notebook || ''}</textarea>
                        
                        <button onclick="saveSLTStaffChanges(${index})" class="btn" style="margin-top: 10px;">Save Changes</button>
                        <div id="sltStaffSuccess${index}" class="alert" style="display: none; margin-top: 10px;"></div>
                    </div>
                `;
            }).join('');
        }

        function saveSLTStaffChanges(staffIndex) {
            const inputs = document.querySelectorAll(`input[data-staff="${staffIndex}"]`);
            const timetable = {};

            inputs.forEach(input => {
                const period = input.dataset.period;
                const day = input.dataset.day;
                const key = `${period}-${day}`;
                timetable[key] = input.value;
            });

            const notebook = document.querySelector(`textarea[data-staff="${staffIndex}"]`).value;

            staff[staffIndex].timetable = timetable;
            staff[staffIndex].notebook = notebook;
            
            saveData();
            
            const successDiv = document.getElementById(`sltStaffSuccess${staffIndex}`);
            successDiv.textContent = 'Changes saved successfully!';
            successDiv.style.display = 'block';
            setTimeout(() => successDiv.style.display = 'none', 3000);
        }

        function displaySLTStudents() {
            const container = document.getElementById('sltStudentsList');
            
            container.innerHTML = students.map((student, index) => `
                <div class="student-card">
                    <h4 style="color: #c41e3a; margin-bottom: 10px;">${student.name}</h4>
                    <p style="margin-bottom: 10px;"><strong>Username:</strong> ${student.username}</p>
                    <p style="margin-bottom: 15px;"><strong>Status:</strong> ${student.tempPassword ? 'Temporary Password' : 'Password Set'}</p>
                    
                    <div class="form-group">
                        <label>New Password:</label>
                        <input type="text" id="newPass${index}" placeholder="Enter new password">
                    </div>
                    
                    <button onclick="resetStudentPassword(${index})" class="btn" style="width: 100%; font-size: 14px;">Reset Password</button>
                    <div id="studentSuccess${index}" class="alert" style="display: none; margin-top: 10px; font-size: 13px;"></div>
                </div>
            `).join('');
        }

        function resetStudentPassword(studentIndex) {
            const newPassword = document.getElementById(`newPass${studentIndex}`).value.trim();
            
            if (!newPassword) {
                alert('Please enter a new password.');
                return;
            }

            if (newPassword.length < 6) {
                alert('Password must be at least 6 characters.');
                return;
            }

            students[studentIndex].password = newPassword;
            students[studentIndex].tempPassword = false;
            
            saveData();
            
            const successDiv = document.getElementById(`studentSuccess${studentIndex}`);
            successDiv.textContent = `Password reset successfully to: ${newPassword}`;
            successDiv.style.display = 'block';
            
            document.getElementById(`newPass${studentIndex}`).value = '';
            
            setTimeout(() => {
                successDiv.style.display = 'none';
                displaySLTStudents();
            }, 3000);
        }

        // Display Staff on Team Page
        function displayStaff() {
            const container = document.getElementById('staffDisplay');
            
            if (staff.length === 0) {
                container.innerHTML = '<p style="color: #666; text-align: center;">Staff members will appear here once they register.</p>';
                return;
            }

            container.innerHTML = staff.map(member => `
                <div class="staff-card">
                    <h4>${member.name}</h4>
                    <p style="color: #666;">${member.username}</p>
                </div>
            `).join('');
        }

        // Display Public News
        function displayPublicNews() {
            const container = document.getElementById('newsDisplay');
            
            if (newsItems.length === 0) {
                container.innerHTML = '<p style="color: #666;">No news items available at this time.</p>';
                return;
            }

            container.innerHTML = newsItems.map(item => `
                <div class="news-item">
                    <h4>${item.title}</h4>
                    <small>Posted by ${item.author} on ${item.date}</small>
                    <p style="margin-top: 10px;">${item.content}</p>
                </div>
            `).join('');
        }

        // Display Public Events
        function displayPublicEvents() {
            const container = document.getElementById('eventsDisplay');
            
            if (events.length === 0) {
                container.innerHTML = '<p style="color: #666;">No upcoming events at this time.</p>';
                return;
            }

            container.innerHTML = events.map(item => `
                <div class="event-item">
                    <h4>${item.name}</h4>
                    <small>${item.date} at ${item.time}</small>
                    <p style="margin-top: 10px;">${item.description}</p>
                </div>
            `).join('');
        }

        // Tab Switching
        function switchTab(tabId) {
            const parentDashboard = document.querySelector('.dashboard.active');
            parentDashboard.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            parentDashboard.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        // Staff Registration (for unlimited staff)
        function registerStaff(username, password, name) {
            const newStaff = {
                username: username,
                password: password,
                name: name,
                timetable: {},
                notebook: ''
            };
            
            staff.push(newStaff);
            saveData();
        }

        // Add registration form for staff (you can call this from console or add UI)
        window.addNewStaff = function() {
            const username = prompt('Enter staff username:');
            const password = prompt('Enter staff password:');
            const name = prompt('Enter staff full name:');
            
            if (username && password && name) {
                // Check if username already exists
                if (staff.find(s => s.username === username)) {
                    alert('Username already exists!');
                    return;
                }
                
                registerStaff(username, password, name);
                alert('Staff member registered successfully!');
                displayStaff();
            }
        };

        // Initialize on load
        loadData();
        displayPublicNews();
        displayPublicEvents();
    </script>
</body>
</html>